<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Drone Weather Dashboard</title>

<style>
    body {
        font-family: "Segoe UI", Arial, sans-serif;
        background: linear-gradient(135deg, #e8f0ff, #f7fbff);
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
    }

    #container {
        width: 92%;
        max-width: 550px;
        background: #ffffff;
        margin: 25px auto;
        padding: 25px;
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        animation: fadeIn 0.5s ease;
        text-align: center;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    h2 {
        margin-top: 0;
        font-size: 26px;
        color: #234;
        font-weight: 600;
    }

    .weather-icon {
        width: 80px;
        height: 80px;
        margin: 10px auto;
    }

    .data {
        margin: 12px 0;
        font-size: 20px;
        font-weight: 500;
        color: #333;
    }

    #risk {
        margin: 20px 0;
        padding: 15px;
        border-radius: 12px;
        font-size: 20px;
        font-weight: bold;
        color: white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    input {
        padding: 12px;
        width: 42%;
        margin: 7px;
        border-radius: 10px;
        border: 1px solid #bbb;
        font-size: 16px;
    }

    button {
        padding: 12px 24px;
        border: none;
        background: #0069ff;
        color: white;
        border-radius: 10px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        margin-top: 10px;
        transition: 0.2s ease;
        box-shadow: 0 3px 10px rgba(0,105,255,0.3);
    }

    button:hover {
        background: #0051c7;
        transform: scale(1.03);
    }

    hr {
        margin: 25px 0;
        border: none;
        border-top: 1px solid #eee;
    }
</style>

</head>
<body>

<div id="container">
    <h2>üì° Live Drone Weather</h2>

    <img id="icon" class="weather-icon" src="" alt="Weather Icon">

    <div class="data" id="temp">Temperature: --</div>
    <div class="data" id="wind">Wind: --</div>
    <div class="data" id="humidity">Humidity: --</div>
    <div class="data" id="condition">Condition: --</div>

    <div id="risk">Flight Risk: --</div>

    <hr>

    <h3>üìç Use Your Location</h3>
    <button onclick="useLocation()">Get Weather</button>

    <hr>

    <h3>üî¢ Enter Coordinates</h3>
    <input id="lat" placeholder="Latitude">
    <input id="lon" placeholder="Longitude">
    <br>
    <button onclick="manualWeather()">Update Weather</button>
</div>

<script>
const API_KEY = "a450b5efb217120de10b1c84bb11a906"; // Your API key

function updateRisk(wind) {
    const box = document.getElementById("risk");

    if (wind < 5) {
        box.style.background = "green";
        box.textContent = "Flight Risk: LOW (Safe)";
    } else if (wind < 10) {
        box.style.background = "orange";
        box.textContent = "Flight Risk: MEDIUM (Use Caution)";
    } else {
        box.style.background = "red";
        box.textContent = "Flight Risk: HIGH (Unsafe)";
    }
}

async function getWeather(lat, lon) {
    const url =
      `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`;

    const res = await fetch(url);
    const data = await res.json();

    document.getElementById("temp").textContent = `Temperature: ${data.main.temp} ¬∞C`;
    document.getElementById("wind").textContent = `Wind: ${data.wind.speed} m/s`;
    document.getElementById("humidity").textContent = `Humidity: ${data.main.humidity}%`;
    document.getElementById("condition").textContent = `Condition: ${data.weather[0].description}`;

    // Weather icon
    document.getElementById("icon").src =
        `http://openweathermap.org/img/wn/${data.weather[0].icon}@4x.png`;

    updateRisk(data.wind.speed);
}

function useLocation() {
    if (!navigator.geolocation) {
        alert("Location not supported‚Äîenter Lat/Lon manually.");
        return;
    }

    navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        getWeather(lat, lon);
    });
}

function manualWeather() {
    const lat = parseFloat(document.getElementById("lat").value);
    const lon = parseFloat(document.getElementById("lon").value);

    if (!lat || !lon) {
        alert("Enter valid coordinates.");
        return;
    }
    getWeather(lat, lon);
}
</script>

</body>
</html>

